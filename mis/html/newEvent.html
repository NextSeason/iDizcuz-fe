<!DOCTYPE html>
<html>
    <head>
        <?php $title = 'iDizcuz Management Information System'; ?>
        @Include::common::head.inc.html
        <link rel="stylesheet" type="text/css" href="@Static::css/mis.css" />
        <link rel="stylesheet" type="text/css" href="@Static::css/newEvent.css" />
    </head>
    <body>
        <div id="idizcuz">
            @Include::top.inc.html
            <div class="main">
                @Include::sidebar.inc.html
                <div class="core">
                    <form class="event-form">
                        <label>
                            <p class="s-title">事件标题：</p>
                            <input type="text" class="title" placeholder="事件标题" />
                        </label>
                        <label>
                            <p class="s-title">事件TIP：</p>
                            <input type="text" class="tip" placeholder="事件TIP" />
                        </label>
                        <label>
                            <p class="s-title">事件时间：</p>
                            <input type="date" class="time" placeholder="事件时间" />
                        </label>
                        <label>
                            <p class="s-title">内容来源：</p>
                            <input type="text" class="origin" placeholder="内容来源" />
                        </label>
                        <label>
                            <p class="s-title">来源地址：</p>
                            <input type="text" class="origin_url" placeholder="内容来源的正确URL" />
                        </label>
                        <label>
                            <p class="s-title">来源LOGO：</p>
                            <input type="text" class="origin_logo" placeholder="内容来源的LOGO的图片地址" />
                        </label>
                        <label>
                            <p class="s-title">事件内容：</p>
                            <textarea class="content"></textarea>
                        </label>
                        <label>
                            <a href="###" class="btns dark large preview">预览</a>
                            <a href="###" class="btns large save">保存</a>
                        </label>
                    </form>
                </div>
            </div>
        </div>
        <script>
            $( '.save' ).on( 'click', function( e ) {
                e.preventDefault();

                var form = $( 'form.event-form' );

                var title = $.trim( form.find( '.title' ).val() ),
                    tip = $.trim( form.find( '.tip' ).val() ),
                    time = $.trim( form.find( '.time' ).val() ),
                    origin = $.trim( form.find( '.origin' ).val() ),
                    origin_url = $.trim( form.find( '.origin_url' ).val() ),
                    origin_logo = $.trim( form.find( '.origin_logo' ).val() ),
                    content = $.trim( form.find( '.content' ).val() );

                if( !title.length ) {
                    alert( '事件标题必须填写' );
                    return false;
                }

                if( !content.length ) {
                    alert( '事件内容必须填写' );
                    return false;
                }

                var data = {
                    title : title,
                    content : content
                };

                tip.length && ( data.tip = tip );
                time.length && ( data.time = time );
                origin.length && ( data.origin = origin );
                origin_url.length && ( data.origin_url = origin_url );
                origin_logo.length && ( data.origin_logo = origin_logo );

                $.ajax( {
                    url : '/mis/interface/newevent',
                    method : 'POST',
                    data : data
                } ).done( function( response ) {
                    
                } );

            } );
        </script>
    </body>
</html>
